<div id="page-title">
  <h1 class="page-header text-overflow">Dashboard</h1>
</div>
<div id="page-content">
  <% if (req.session.me.isAdmin) { %>
  <div class="row">
    <div class="panel">
      <div class="panel-heading">
        <h3 class="panel-title">Meine Meetingserien</h3>
      </div>
      <% _.each(meetingseriesList, function (meetingseries) { %>
      <div class="panel-body">
        <div class="col-xs-8 col-lg-8">
          <h4><a class="text-info" href="meetingseries/view/<%= meetingseries.id %>"><%= meetingseries.title %></a>
          </h4>
          <%= meetingseries.description %>
        </div>
        <div class="col-xs-4 col-lg-4">
          <ul class="list-group bg-trans mar-no">
            <li class="list-group-item">
              <span class="badge badge-info"><%= meetingseries.instances.length %></span>
              Gehaltene Meetings
            </li>
            <% if (meetingseries.instances.length > 0) { %>
            <li class="list-group-item">
              <span class="badge badge-info">
                <% if (meetingseries.instances[0].startTime) { %>
                <%= meetingseries.instances[0].startTime %>
                <% } else { %>
                Kein Zeitpunkt bekannt
                <% } %>
              </span>
              Zuletzt gehaltenes Meeting
            </li>
            <% } %>
          </ul>
        </div>
      </div>
      <hr>
      <% }) %>
    </div>
  </div>

  <% } else { %>

  <div class="row">
    <div class="col-sm-offset-3 col-sm-6 text-center">
      <br>

      <h3>Willkommen <%= req.session.me.name %></h3>
      <br>
      <p class="h4 text-thin media-heading">
        Da du nur einen Gastakkount besitzt, ist es dir leider nicht möglich eine Meetingserie zu starten.
      </p>
      <p class="h4 text-thin media-heading">
        Um Meetings erstellen zu können <a href="/signup">registriere</a> dich bitte.
      </p>
      <br>
      <p class="h4 text-thin media-heading">
        Einem Meeting beiwohnen kannst du jedoch jetzt schon. Schaue in die Timeline.
      </p>
      <p class="h4 text-thin media-heading">
        Vielleicht findet sich dort das ein oder andere Meeting.
      </p>
      <br>
    </div>
  </div>
  <br/>
  <br/>
  <br/>
  <% } %>

  <hr/>
</div>

<div id="page-title">
  <h3 class="page-header text-overflow">Meeting Timeline</h3>
</div>

<div id="page-content">
  <div class=" row">
    <br><br><br>

    <div class="col-sm-offset-2 col-sm-8">

      <div class="timeline">
        <div class="timeline-header">
          <div class="timeline-header-title bg-info">Jetzt</div>
        </div>
        <% _.each(meetingHistory, function (meeting) { %>
        <div class="timeline-entry">
          <div class="timeline-stat">
            <div class="timeline-icon"></div>
            <div class="timeline-time">
              <% if (meeting.startTime) { %>
              <%= meeting.startTime %>
              <% } else { %>
              Kein Zeitpunkt gegeben
              <% } %>
            </div>
          </div>
          <div class="timeline-label">
            <h5><a class="text-info text-lg" href="meeting/id/<%= meeting.url %>"><%= meeting.title %></a></h5>
            <p><%= meeting.description %></p>
          </div>
        </div>
        <% }) %>
        <% if (meetingHistory.length == 0) { %>
        <div class="timeline-entry">
          <div class="timeline-stat">
            <div class="timeline-icon"></div>
          </div>
          <div class="timeline-label">
            <h5 class="text-info text-lg">Du hast leider keine Meetings in deiner Timeline :(</h5>
          </div>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</div>
<div id="newMeetingseriesModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">New meetingseries</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="col-md-3 control-label" for="meeting-title-input">Meeting title</label>
          <div class="col-md-9">
            <input type="text" id="meeting-title-input" class="form-control" placeholder="Title"/>
            <small class="help-block">Please enter a title</small>
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-3 control-label" for="meeting-description-textarea">Description</label>
          <div class="col-md-9">
            <textarea id="meeting-description-textarea" rows="9" class="form-control"
                      placeholder="Description"></textarea>
            <small class="help-block">Please enter a description</small>
          </div>
        </div>
        <div>
          <input type="text" id="meeting-admins-input" class="form-control" placeholder="Add an admin" value=""
                 data-role="tagsinput" style="display: none;"/>
          <div class="bootstrap-tagsinput">
            <span class="tag label label-primary">User<span data-role="remove"></span></span>
            <input type="text" placeholder="Add an admin" style="width: 9em !important;"/>
          </div>
        </div>

        <hr/>
        <br/>
        <br/>

        <p class="text-thin mar-btm">Timer</p>
        <div class="input-group date">
          <input id="meeting-timer-input" type="text" class="form-control"/>
          <span class="input-group-addon"><i class="fa fa-clock-o fa-lg"></i></span>
        </div>

        <br/>

        <p class="text-thin mar-btm">URL</p>
        <div class="input-group date">
          <input id="meeting-url-input" type="text" class="form-control"/>
          <span class="input-group-addon"><i class="fa fa-globe-o fa-lg"></i></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="newMeetingseriesModalSubmit">Create new</button>
      </div>
    </div>
  </div>
</div>
